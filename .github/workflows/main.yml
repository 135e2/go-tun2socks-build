name: build

on:
  push:
    branches:
      - 'master'

jobs:
  build:

    runs-on: ubuntu-18.04
  
    steps:
    - uses: actions/checkout@v2
    - name: Setup golang
      uses: actions/setup-go@v2
      with:
        go-version: '1.14.2'
    - name: Setup gomobile
      run: |
        go get golang.org/x/mobile/cmd/gomobile
        gomobile init -v
    - name: Set up JDK 1.8
      uses: actions/setup-java@v1
      with:
        java-version: 1.8
    - name: Setup NDK
      run: |
        wget "https://dl.google.com/android/repository/android-ndk-r20b-linux-x86_64.zip" -O ndk.zip
        unzip ndk.zip && rm ndk.zip
    - name: Check Build
      run: |
        go version
        java -version
